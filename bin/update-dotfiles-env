#!/usr/bin/env ruby
# frozen_string_literal: true
#
# This is invoked by install.sh.
# This creates ~/.dotfiles.env and sets DOTFILESD to the user's dotfiles directory.
#
require "fileutils"

home = Dir.home
target = Dir.pwd
dotfilesd_value = target.start_with?(home) ? target.sub(/\A#{Regexp.escape(home)}/, "$HOME") : target
file  = target + "/zsh/dotfiles.env"
content = %(export DOTFILESD="#{dotfilesd_value}")

File.write(file, content)